(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-publish-publish"],{"140b":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".page[data-v-62a0d681]{position:absolute;left:0;right:0;top:0;bottom:0;background-color:#000}.header[data-v-62a0d681]{position:absolute;left:0;right:0;flex-direction:row;height:%?100?%;line-height:%?100?%;align-items:center;padding-left:%?40?%;padding-right:%?40?%}.header-center[data-v-62a0d681]{flex:1;flex-direction:row;align-items:center;justify-content:center}.header-left[data-v-62a0d681],\n.header-right[data-v-62a0d681]{color:#999;height:%?100?%;line-height:%?100?%;align-items:flex-start;justify-content:flex-end;font-family:iconfont}.header-right-search[data-v-62a0d681]{height:%?100?%\n\t/* align-items: flex-start;\n\tjustify-content: flex-end; */}.header-item[data-v-62a0d681]{align-items:center;margin-left:%?6?%;margin-right:%?6?%}.header-item-title[data-v-62a0d681]{width:%?200?%;text-align:center;height:%?60?%;line-height:%?60?%;color:#fff;font-size:18px;font-weight:400}.header-refresh-title[data-v-62a0d681]{width:%?300?%;text-align:center;height:%?60?%;line-height:%?60?%;color:#fff;font-size:16px;font-weight:600}.header-item-line[data-v-62a0d681]{height:%?5?%;line-height:%?8?%;width:%?60?%;border-radius:%?8?%}.preplay-wrapper[data-v-62a0d681]{display:flex;flex-direction:row;justify-content:center;margin-top:%?-90?%;margin-left:%?30?%;border-width:1px;\n\t/* border-color: #343438; */\n\t/* background-color: #0c0c0c; */padding:%?6?% %?16?%;width:%?200?%;border-radius:%?20?%}.vlog-content[data-v-62a0d681]{margin-top:%?30?%;height:100px;color:#fff;font-size:16px;background-color:#0c0c0c;padding-left:10px;padding-top:10px;padding-right:10px;padding-bottom:10px;border-radius:10px}.btn-preplay[data-v-62a0d681]{background-color:#0c0c0c;border-color:#343438}.btn-preplay-touched[data-v-62a0d681]{background-color:#545456;border-color:#000}.btn-publish[data-v-62a0d681]{background-color:#ef274d}.btn-publish-touched[data-v-62a0d681]{background-color:#de6981}.choose-cover[data-v-62a0d681]{display:flex;flex-direction:column;justify-content:center;width:%?360?%;background-color:#000;opacity:.3;height:50px;margin-left:%?30?%;border-bottom-right-radius:10px;border-bottom-left-radius:10px;position:relative;top:-50px}",""]),t.exports=e},3206:function(t,e,i){t.exports=i.p+"static/img/loading-4.7c592a5c.gif"},"36bb":function(t,e,i){"use strict";var a=i("7807"),n=i.n(a);n.a},"3e44":function(t,e){t.exports="data:image/png;base64,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exYKbysAP8sv9P5jQcNah2gbAPP5bt79te6axeLbBMBT+abOfy3qV/tQbQDgRN743bXvloMFNBoA+UQteaEXRdGsA+0aEbKpALyT39rtbUSXHC6icQAg4uPLy8tyDz92qFtjQusAcDkiHqyaAkT0dj7u91WttirXowxAv9//fJZlj1VsUY92Op2e6vNyKraGkZSjDECaplcSkfxYVBVeb+UbOg9WoZg61qADwIeJqAr75o8sLi72pqen+3UUvio1KwNARGNpmi6OcAH/y0/uHhphDY1JrQyAXHmSJC8AwKUjUGF/fnun/IzcEdRai5RaAKRpehsR3V3iCmXD5Rcw9peYsxWptACI4/hiRPwdAFxQgkoP5xd6x0rI1boUWgBIlfr9/lezLHP2m3aI2M+/dvVI67pS4oK1AcivBeQU+IyDeh/ML/TechCbQ65QwAiAfr//kSzLrH2Akohkw78YRdGj3KVyFDACQJaYXw+8BAAbTEomokPdbvdzExMTckuXXyUpYAyArPPIkSMbO52O/JTNdap1I+KJLMv2R1F0k6ov25srYAWAYRmzs7OX+r5/AwDcCABja5WHiEmWZffLPz65M2+kbgSrAAyLSJLkIgC4AREvI6IIACLZcCJKiegV3/cPjI2NvTg5OfmubuHsZ0eB/wNx2PCuDA4dmQAAAABJRU5ErkJggg=="},"51c5":function(t,e,i){"use strict";i.r(e);var a=i("8576"),n=i.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(o);e["default"]=n.a},6976:function(t,e,i){"use strict";i.r(e);var a=i("c3d8"),n=i("51c5");for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);i("36bb");var r=i("f0c5"),c=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"62a0d681",null,!1,a["a"],void 0);e["default"]=c.exports},7807:function(t,e,i){var a=i("140b");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("5cb77e69",a,!0,{sourceMap:!1,shadowMode:!1})},8576:function(t,e,i){"use strict";(function(t){i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=uni.getSystemInfoSync(),n=getApp(),o={data:function(){return{publichTouched:!1,preplayTouched:!1,tempFilePath:"",videoUrl:"",tempCover:"",title:"",width:0,height:0,percentCompleted:0}},onLoad:function(e){var i=this;this.statusBarHeight=a.statusBarHeight,this.screenWidth=a.screenWidth;var n=JSON.parse(e.fileObjectEvent),o=(new Date).getTime();t.uploadFile({filePath:n.tempFilePath,cloudPath:o+".mp4",onUploadProgress:function(t){var e=Math.round(100*t.loaded/t.total);i.percentCompleted=e},success:function(t){var e=t.filePath,a=t.fileID;i.tempFilePath=e,i.videoUrl=a,i.tempCover=a+"?x-oss-process=video/snapshot,t_1,f_jpg,ar_auto",i.width=n.width,i.height=n.height}})},methods:{typingContent:function(t){this.title=t.detail.value},doPublich:function(){var t=this,e=getApp().getUserInfoSession().id,i={vlogerId:e,url:t.videoUrl,cover:t.tempCover,title:t.title,width:t.width,height:t.height},a=n.globalData.serverUrl;uni.request({method:"POST",header:{headerUserId:e,headerUserToken:n.getUserSessionToken()},url:a+"/vlog/publish",data:i,success:function(t){200==t.data.status?(uni.showToast({title:"发布成功！",icon:"none"}),uni.navigateBack({delta:1,animationType:"zoom-fade-in",animationDuration:1e3}),uni.switchTab({url:"../me/me"})):uni.showToast({title:t.data.msg,icon:"none",duration:3e3})}})},preview:function(){uni.navigateTo({url:"/pages/publish/preview?videoUrl="+this.videoUrl+"&width="+this.width+"&height="+this.height,animationType:"slide-in-bottom",animationDuration:500})},touchstartPreplay:function(){this.preplayTouched=!0},touchendPreplay:function(){this.preplayTouched=!1},touchstartPublich:function(){this.publichTouched=!0},touchendPublich:function(){this.publichTouched=!1},chooseCover:function(){var t=this,e=getApp().getUserInfoSession().id;uni.chooseImage({count:1,sourceType:["album"],success:function(i){t.tempCover=i.tempFilePaths[0];var a=n.globalData.serverUrl;uni.uploadFile({url:a+"/file/uploadImage?userId="+e,name:"file",filePath:t.tempCover,success:function(e){var i=JSON.parse(e.data);if(200==i.status){var a=i.data;t.tempCover=a}else uni.showToast({title:e.data.msg,icon:"none",duration:3e3})}})}})}}};e.default=o}).call(this,i("a9ff")["default"])},c3d8:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"page"},[100!=t.percentCompleted?a("v-uni-view",{staticStyle:{marginTop:"60rpx",display:"flex","flex-direction":"column","justify-content":"center"}},[a("v-uni-progress",{style:{screenWidth:t.screenWidth+"px"},attrs:{percent:t.percentCompleted,"stroke-width":"3",activeColor:"#ef274d",backgroundColor:"#F1F1F1"}}),a("v-uni-text",{staticStyle:{color:"#F1F1F1","font-size":"16px","text-align":"center","margin-top":"20px"},style:{screenWidth:t.screenWidth+"px"}},[t._v("视频上传中~ 请耐心等待~~")]),a("v-uni-image",{staticStyle:{width:"600rpx",height:"600rpx","align-self":"center"},attrs:{mode:"aspectFit",src:i("3206")}})],1):t._e(),100==t.percentCompleted?a("v-uni-view",[a("v-uni-image",{staticStyle:{marginTop:"30px",width:"360rpx",height:"500rpx","border-radius":"10px","margin-left":"30rpx","margin-top":"10px"},attrs:{src:t.tempCover,mode:"aspectFit"}}),a("v-uni-view",{staticClass:"choose-cover",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseCover.apply(void 0,arguments)}}},[a("v-uni-text",{staticStyle:{color:"#ffffff","font-size":"14px","align-self":"center"}},[t._v("选择封面")])],1),a("v-uni-view",{staticClass:"preplay-wrapper",class:{"btn-preplay":!t.preplayTouched,"btn-preplay-touched":t.preplayTouched},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.preview.apply(void 0,arguments)},touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.touchstartPreplay.apply(void 0,arguments)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.touchendPreplay.apply(void 0,arguments)}}},[a("v-uni-image",{staticStyle:{width:"22rpx",height:"22rpx","align-self":"center"},attrs:{src:i("3e44")}}),a("v-uni-text",{staticStyle:{color:"#e6e6e6","font-size":"14px","align-self":"center","margin-left":"10rpx"}},[t._v("预览视频")])],1),a("v-uni-textarea",{staticClass:"vlog-content",attrs:{"placeholder-style":"color: #9798a0;",placeholder:"添加合适的标题内容",value:t.title,model:t.title,maxlength:"60","confirm-type":"done"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.typingContent.apply(void 0,arguments)}}}),a("v-uni-view",{class:{"btn-publish":!t.publichTouched,"btn-publish-touched":t.publichTouched},staticStyle:{"margin-top":"30rpx",height:"90rpx",display:"flex","justify-content":"center","border-radius":"20px"},on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.touchstartPublich.apply(void 0,arguments)},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.touchendPublich.apply(void 0,arguments)},click:function(e){arguments[0]=e=t.$handleEvent(e),t.doPublich.apply(void 0,arguments)}}},[a("v-uni-text",{staticStyle:{color:"#e6e6e6","font-size":"18px","align-self":"center","font-weight":"500"}},[t._v("发布 Vlog")])],1)],1):t._e()],1)},n=[]}}]);