(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-message-message"],{"2a18":function(t,e,s){var i=s("24fb");e=i(!1),e.push([t.i,"\n/* .status_bar {\n\theight: var(--status-bar-height);\n\twidth: 100%;\n} */.page[data-v-7cb2148c]{position:absolute;left:0;right:0;top:0;bottom:0;background-color:#181b27}.line[data-v-7cb2148c]{height:%?1?%;background-color:#393a41;width:%?750?%}.user-face[data-v-7cb2148c]{width:%?120?%;height:%?120?%;border-radius:%?100?%;border-width:1px;border-color:#f1f1f1}.msg-item-box[data-v-7cb2148c]{display:flex;flex-direction:column;flex-direction:row;justify-content:space-between;padding:%?30?%;margin-top:%?10?%}.msg-item-left[data-v-7cb2148c]{display:flex;flex-direction:column;flex-direction:row}.msg-item-middle[data-v-7cb2148c]{display:flex;flex-direction:column;margin-left:%?30?%;padding-top:%?20?%}.user-nickname[data-v-7cb2148c]{color:#fff;font-size:14px;font-weight:600}.msg-content[data-v-7cb2148c]{color:#fff;font-size:12px;font-weight:300;margin-top:%?2?%}.msg-item-right[data-v-7cb2148c]{width:%?160?%;height:%?70?%;opacity:.8;border-radius:%?8?%;display:flex;flex-direction:row;justify-content:center}.op-fans-btn[data-v-7cb2148c]{font-size:13px;color:#fff;font-weight:500}.vlog-cover[data-v-7cb2148c]{width:%?100?%;height:%?120?%;margin-right:%?10?%;border-radius:2px}",""]),t.exports=e},"3abe":function(t,e,s){"use strict";s.d(e,"b",(function(){return i})),s.d(e,"c",(function(){return a})),s.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-uni-view",{staticClass:"page"},[s("v-uni-view",{staticClass:"line"}),s("v-uni-scroll-view",{attrs:{"scroll-y":"true"},on:{scrolltolower:function(e){arguments[0]=e=t.$handleEvent(e),t.loadMore.apply(void 0,arguments)}}},[t._l(t.msgList,(function(e,i){return[1==e.msgType?s("v-uni-view",{key:i+"_0",staticClass:"msg-item-box"},[s("v-uni-view",{staticClass:"msg-item-left"},[s("v-uni-image",{staticClass:"user-face",staticStyle:{"align-self":"center"},attrs:{mode:"scaleToFill",src:e.fromFace}}),s("v-uni-view",{staticClass:"msg-item-middle"},[s("v-uni-text",{staticClass:"user-nickname"},[t._v(t._s(e.fromNickname))]),s("v-uni-text",{staticClass:"msg-content"},[t._v("关注了你    "+t._s(t.getGraceDateBeforeNow(e.createTime)))])],1)],1),e.msgContent.isFriend?t._e():s("v-uni-view",{staticClass:"msg-item-right",staticStyle:{"background-color":"#ef274d","align-self":"center"},on:{click:function(s){arguments[0]=s=t.$handleEvent(s),t.followMe(e.id,e.fromUserId)}}},[s("v-uni-text",{staticClass:"op-fans-btn",staticStyle:{"align-self":"center"}},[t._v("回粉")])],1),e.msgContent.isFriend?s("v-uni-view",{staticClass:"msg-item-right",staticStyle:{"background-color":"#545456","align-self":"center"},on:{click:function(s){arguments[0]=s=t.$handleEvent(s),t.cancelFollow(e.id,e.fromUserId)}}},[s("v-uni-text",{staticClass:"op-fans-btn",staticStyle:{"align-self":"center"}},[t._v("互关")])],1):t._e()],1):t._e(),2==e.msgType?s("v-uni-view",{key:i+"_1",staticClass:"msg-item-box"},[s("v-uni-view",{staticClass:"msg-item-left"},[s("v-uni-image",{staticClass:"user-face",staticStyle:{"align-self":"center"},attrs:{mode:"scaleToFill",src:e.fromFace}}),s("v-uni-view",{staticClass:"msg-item-middle"},[s("v-uni-text",{staticClass:"user-nickname"},[t._v(t._s(e.fromNickname))]),s("v-uni-text",{staticClass:"msg-content"},[t._v("点赞了你的视频    "+t._s(t.getGraceDateBeforeNow(e.createTime)))])],1)],1),s("v-uni-image",{staticClass:"vlog-cover",staticStyle:{"align-self":"center"},attrs:{mode:"aspectFill",src:e.msgContent.vlogCover},on:{click:function(s){arguments[0]=s=t.$handleEvent(s),t.goToVlog(e.msgContent.vlogId)}}})],1):t._e(),3==e.msgType?s("v-uni-view",{key:i+"_2",staticClass:"msg-item-box"},[s("v-uni-view",{staticClass:"msg-item-left"},[s("v-uni-image",{staticClass:"user-face",staticStyle:{"align-self":"center"},attrs:{mode:"scaleToFill",src:e.fromFace}}),s("v-uni-view",{staticClass:"msg-item-middle"},[s("v-uni-text",{staticClass:"user-nickname"},[t._v(t._s(e.fromNickname))]),s("v-uni-text",{staticClass:"msg-content",staticStyle:{"font-weight":"400",width:"360rpx",lines:"2","text-overflow":"ellipsis"}},[t._v(t._s(e.msgContent.commentContent))]),s("v-uni-text",{staticClass:"msg-content",staticStyle:{"font-weight":"200"}},[t._v("发表了评论    "+t._s(t.getGraceDateBeforeNow(e.createTime)))])],1)],1),s("v-uni-image",{staticClass:"vlog-cover",staticStyle:{"align-self":"center"},attrs:{mode:"aspectFill",src:e.msgContent.vlogCover},on:{click:function(s){arguments[0]=s=t.$handleEvent(s),t.goToVlog(e.msgContent.vlogId)}}})],1):t._e(),4==e.msgType?s("v-uni-view",{key:i+"_3",staticClass:"msg-item-box"},[s("v-uni-view",{staticClass:"msg-item-left"},[s("v-uni-image",{staticClass:"user-face",staticStyle:{"align-self":"center"},attrs:{mode:"scaleToFill",src:e.fromFace}}),s("v-uni-view",{staticClass:"msg-item-middle"},[s("v-uni-text",{staticClass:"user-nickname"},[t._v(t._s(e.fromNickname))]),s("v-uni-text",{staticClass:"msg-content",staticStyle:{"font-weight":"400",width:"360rpx",lines:"2","text-overflow":"ellipsis"}},[t._v(t._s(e.msgContent.commentContent))]),s("v-uni-text",{staticClass:"msg-content",staticStyle:{"font-weight":"200"}},[t._v("回复了你    "+t._s(t.getGraceDateBeforeNow(e.createTime)))])],1)],1),s("v-uni-image",{staticClass:"vlog-cover",staticStyle:{"align-self":"center"},attrs:{mode:"aspectFill",src:e.msgContent.vlogCover},on:{click:function(s){arguments[0]=s=t.$handleEvent(s),t.goToVlog(e.msgContent.vlogId)}}})],1):t._e(),5==e.msgType?s("v-uni-view",{key:i+"_4",staticClass:"msg-item-box"},[s("v-uni-view",{staticClass:"msg-item-left"},[s("v-uni-image",{staticClass:"user-face",staticStyle:{"align-self":"center"},attrs:{mode:"scaleToFill",src:e.fromFace}}),s("v-uni-view",{staticClass:"msg-item-middle"},[s("v-uni-text",{staticClass:"user-nickname"},[t._v(t._s(e.fromNickname))]),s("v-uni-text",{staticClass:"msg-content"},[t._v("点赞了你的评论    "+t._s(t.getGraceDateBeforeNow(e.createTime)))])],1)],1),s("v-uni-image",{staticClass:"vlog-cover",staticStyle:{"align-self":"center"},attrs:{mode:"aspectFill",src:e.msgContent.vlogCover},on:{click:function(s){arguments[0]=s=t.$handleEvent(s),t.goToVlog(e.msgContent.vlogId)}}})],1):t._e()]}))],2)],1)},a=[]},"3e75":function(t,e,s){"use strict";s.r(e);var i=s("8afa"),a=s.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){s.d(e,t,(function(){return i[t]}))}(n);e["default"]=a.a},"8afa":function(t,e,s){"use strict";s("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,s("a434"),s("99af");var i=getApp(),a={data:function(){return{msgList:[],page:0,totalPage:0}},onShow:function(){this.page=0,this.totalPage=0,this.msgList=[],this.fetchList(0)},methods:{goToVlog:function(t){uni.navigateTo({url:"../vlog/vlog?vlogId="+t})},reFreshList:function(t,e,s){for(var i=this.msgList,a=0;a<i.length;a++){var n=i[a];if(n.id==t){var o=n.msgContent;o.isFriend=s,i.splice(a,1,n)}}this.msgList=i},cancelFollow:function(t,e){var s=this,a=getApp().getUserInfoSession().id,n=i.globalData.serverUrl;uni.request({method:"POST",header:{headerUserId:a,headerUserToken:i.getUserSessionToken()},url:n+"/fans/cancel?myId="+a+"&vlogerId="+e,success:function(i){200==i.data.status?(s.reFreshList(t,e,!1),uni.setStorageSync("justCancelVlogerId",e)):uni.showToast({title:i.data.msg,icon:"none",duration:3e3})}})},followMe:function(t,e){var s=this,a=getApp().getUserInfoSession().id,n=i.globalData.serverUrl;uni.request({method:"POST",header:{headerUserId:a,headerUserToken:i.getUserSessionToken()},url:n+"/fans/follow?myId="+a+"&vlogerId="+e,success:function(i){200==i.data.status?(s.reFreshList(t,e,!0),uni.setStorageSync("justFollowVlogerId",e)):uni.showToast({title:i.data.msg,icon:"none",duration:3e3})}})},loadMore:function(){var t=this.page+1;this.fetchList(t)},fetchList:function(t){var e=this,s=i.getUserInfoSession();if(null!=s){var a=getApp().getUserInfoSession().id,n=i.globalData.serverUrl;uni.request({method:"GET",header:{headerUserId:a,headerUserToken:i.getUserSessionToken()},url:n+"/msg/list?userId="+a+"&page="+t+"&pageSize=10",success:function(s){if(200==s.data.status){var i=s.data.data;console.log(i),null!=i&&void 0!=i&&i.length>0&&(e.msgList=e.msgList.concat(i),e.page=t)}}})}else uni.showToast({duration:3e3,title:"请登录~",icon:"none"})},getGraceDateBeforeNow:function(t){var e=i.dateFormat("YYYY-mm-dd",new Date(t));return getApp().getDateBeforeNow(e)}}};e.default=a},"9ca0":function(t,e,s){var i=s("2a18");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=s("4f06").default;a("7efd3f4d",i,!0,{sourceMap:!1,shadowMode:!1})},a74e:function(t,e,s){"use strict";s.r(e);var i=s("3abe"),a=s("3e75");for(var n in a)["default"].indexOf(n)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(n);s("b3bf");var o=s("f0c5"),c=Object(o["a"])(a["default"],i["b"],i["c"],!1,null,"7cb2148c",null,!1,i["a"],void 0);e["default"]=c.exports},b3bf:function(t,e,s){"use strict";var i=s("9ca0"),a=s.n(i);a.a}}]);