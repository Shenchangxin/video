(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index"],{"10d9":function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,".icon[data-v-18d79177]{width:%?80?%;height:%?80?%;opacity:.9}.user-face[data-v-18d79177]{width:%?100?%;height:%?100?%;border-radius:%?100?%}.play-cd[data-v-18d79177]{width:%?150?%;height:%?150?%;opacity:.8}.refresh-info-txt[data-v-18d79177]{color:#f1f1f1;text-align:center;font-size:12px}.publish-info-box[data-v-18d79177]{position:absolute;bottom:%?200?%;left:0;right:0;padding-left:%?20?%;padding-right:%?20?%;flex-direction:row;justify-content:space-between;align-items:center}.publish-info-vloger-name[data-v-18d79177]{color:#fff;font-size:%?40?%;font-weight:600;padding:%?10?%}.publish-info-music-box[data-v-18d79177]{flex-direction:row;align-items:center}.publish-info-content[data-v-18d79177]{color:#fff;font-size:%?28?%;font-weight:400;padding:%?10?%;lines:5;width:%?520?%;text-overflow:ellipsis}.icon-fire[data-v-18d79177]{width:%?36?%;height:%?36?%}.muisc-words[data-v-18d79177]{color:#fff;font-size:%?28?%;padding:%?10?%;width:%?400?%}.some-counts[data-v-18d79177]{font-size:%?24?%;font-weight:500;text-align:center;color:#fff;margin-top:%?2?%}.operation-box[data-v-18d79177]{position:absolute;top:0;bottom:0;right:0;align-items:center;justify-content:center;padding-right:%?20?%}.operation-face-box[data-v-18d79177]{border-radius:%?100?%;border-color:#fff;border-width:%?3?%}.follow-me[data-v-18d79177]{width:%?40?%;height:%?40?%;border-radius:10px;position:relative;top:%?-20?%}.like-box[data-v-18d79177]{flex-direction:column;align-items:center;margin-top:%?30?%}.comment-and-share-box[data-v-18d79177]{flex-direction:column;align-items:center;margin-top:%?45?%}",""]),t.exports=e},"21e4":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"page"},[n("v-uni-swiper",{staticStyle:{},style:{height:t.screenHeight+"px"},attrs:{current:t.curIndex},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.changeTopTab.apply(void 0,arguments)}}},[n("v-uni-swiper-item",[n("v-uni-view",{staticClass:"near-by",style:{height:t.screenHeight+"px"}},[n("v-uni-text",{staticClass:"warn-info"},[t._v("暂未开放，敬请期待！")])],1)],1),n("v-uni-swiper-item",[null==t.myUserInfo?n("v-uni-view",{staticClass:"my-follow",style:{height:t.screenHeight+"px"}},[n("v-uni-text",{staticClass:"warn-info"},[t._v("请登录后查看！")])],1):t._e(),n("video-follow-comp",{ref:"videoFollowComp",attrs:{screenHeight:t.screenHeight,playFollowStatus:t.playFollowStatus,videoList:t.videoList,refreshList:t.refreshList,pagingList:t.pagingList},on:{showLoading:function(e){arguments[0]=e=t.$handleEvent(e),t.showLoading.apply(void 0,arguments)},hideLoading:function(e){arguments[0]=e=t.$handleEvent(e),t.hideLoading.apply(void 0,arguments)},letFollowVideoPause:function(e){arguments[0]=e=t.$handleEvent(e),t.letFollowVideoPause.apply(void 0,arguments)},displayVideoPaging:function(e){arguments[0]=e=t.$handleEvent(e),t.displayVideoPaging.apply(void 0,arguments)}}})],1),n("v-uni-swiper-item",[n("video-comp",{ref:"videoComp",attrs:{screenHeight:t.screenHeight,playStatus:t.playStatus,videoList:t.videoList,refreshList:t.refreshList,pagingList:t.pagingList},on:{showLoading:function(e){arguments[0]=e=t.$handleEvent(e),t.showLoading.apply(void 0,arguments)},hideLoading:function(e){arguments[0]=e=t.$handleEvent(e),t.hideLoading.apply(void 0,arguments)},displayVideoPaging:function(e){arguments[0]=e=t.$handleEvent(e),t.displayVideoPaging.apply(void 0,arguments)}}})],1)],1),t.isLoading?t._e():n("v-uni-view",{staticClass:"header",style:{marginTop:t.statusBarHeight+"px"}},[n("v-uni-text",{staticClass:"header-left"}),n("v-uni-view",{staticClass:"header-center"},[n("v-uni-view",{staticClass:"header-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.tapFollow(0)}}},[n("v-uni-text",{staticClass:"header-item-title"},[t._v("附近")]),n("v-uni-view",{staticClass:"header-item-line",class:{"activate-line":0===t.curIndex}})],1),n("v-uni-view",{staticClass:"header-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.tapFollow(1)}}},[n("v-uni-text",{staticClass:"header-item-title"},[t._v("关注")]),n("v-uni-view",{staticClass:"header-item-line",class:{"activate-line":1===t.curIndex}})],1),n("v-uni-view",{staticClass:"header-item",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.tapFollow(2)}}},[n("v-uni-text",{staticClass:"header-item-title"},[t._v("推荐")]),n("v-uni-view",{staticClass:"header-item-line",class:{"activate-line":2===t.curIndex}})],1)],1),n("v-uni-image",{staticClass:"header-right-search normal-img",attrs:{src:i("e62a")},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goSearch.apply(void 0,arguments)}}})],1),t.isLoading?n("v-uni-view",{staticClass:"header",style:{marginTop:t.statusBarHeight+"px"}},[n("v-uni-text",{staticClass:"header-left"}),n("v-uni-view",{staticClass:"header-center"},[n("v-uni-view",{staticClass:"header-item"},[n("v-uni-text",{staticClass:"header-refresh-title"},[t._v("下拉刷新视频")])],1)],1),n("v-uni-image",{staticClass:"header-right-search normal-img",attrs:{src:i("ff41")}})],1):t._e()],1)},o=[]},"31c5":function(t,e,i){"use strict";var n=i("4ae7"),o=i.n(n);o.a},"41e7":function(t,e,i){"use strict";i("7a82");var n=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(i("6665")),s=n(i("7d7d")),a=uni.getSystemInfoSync(),l=getApp(),r={components:{videoComp:o.default,videoFollowComp:s.default},data:function(){return{isLoading:!1,statusBarHeight:a.statusBarHeight,screenHeight:a.screenHeight,curIndex:2,playStatus:!1,playFollowStatus:!1,videoList:[],refreshList:[],pagingList:[],refresh:0}},onLoad:function(){plus.navigator.hasNotchInScreen()},onTabItemTap:function(t){var e=t.index;0==e||(1==e?(this.playStatus=!1,this.playFollowStatus=!0):2==e&&(this.playStatus=!0,this.playFollowStatus=!1))},onShow:function(){var t=this,e=l.getUserInfoSession();if(this.myUserInfo=e,void 0!=this.$refs.videoComp){var i=this.$refs.videoComp.playerList;void 0!=i&&0==i.length&&this.$refs.videoComp.displayVideoPaging(1,!0)}0==t.curIndex||(1==t.curIndex?t.playFollowStatus=!0:2==t.curIndex&&(t.playStatus=!0));var n=uni.getStorageSync("justFollowVlogerId");l.isStrEmpty(n)||(this.$refs.videoComp.reFollowPlayList(n),uni.setStorageSync("justFollowVlogerId",""));var o=uni.getStorageSync("justCancelVlogerId");l.isStrEmpty(o)||(this.$refs.videoComp.reCancelPlayList(o),uni.setStorageSync("justCancelVlogerId",""))},onHide:function(){var t=this;0==t.curIndex||(1==t.curIndex?t.playFollowStatus=!1:2==t.curIndex&&(t.playStatus=!1))},onPullDownRefresh:function(){0==this.curIndex||(1==this.curIndex?this.$refs.videoFollowComp.displayVideoPaging(1,!0):2==this.curIndex&&this.$refs.videoComp.displayVideoPaging(1,!0))},methods:{goSearch:function(){uni.navigateTo({url:"/pages/search/search"})},changeTopTab:function(t){var e=t.detail.current;this.curIndex=e,this.playFollowStatus=1===this.curIndex,this.playStatus=2===this.curIndex},tapFollow:function(t){this.curIndex=t,this.playFollowStatus=1===this.curIndex,this.playStatus=2===this.curIndex},showLoading:function(){this.isLoading=!0},hideLoading:function(){this.isLoading=!1},letFollowVideoPause:function(){this.playFollowStatus=!1}}};e.default=r},"4ae7":function(t,e,i){var n=i("d1c1");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("6b845106",n,!0,{sourceMap:!1,shadowMode:!1})},5881:function(t,e,i){"use strict";i.r(e);var n=i("21e4"),o=i("8275");for(var s in o)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(s);i("31c5");var a=i("f0c5"),l=Object(a["a"])(o["default"],n["b"],n["c"],!1,null,"d919a642",null,!1,n["a"],void 0);e["default"]=l.exports},6665:function(t,e,i){"use strict";i.r(e);var n=i("dc37"),o=i("f24c");for(var s in o)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(s);i("b576");var a=i("f0c5"),l=Object(a["a"])(o["default"],n["b"],n["c"],!1,null,"e055222c",null,!1,n["a"],void 0);e["default"]=l.exports},"6a4a":function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return n}));var n={uniPopup:i("3bed").default,uniPopupComments:i("773a").default,uniPopupShare:i("8973").default},o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticStyle:{flex:"1"}},[i("list",{attrs:{pagingEnabled:!0,"show-scrollbar":!1,scrollable:!0},on:{scroll:function(e){arguments[0]=e=t.$handleEvent(e),t.listScroll.apply(void 0,arguments)},scrollend:function(e){arguments[0]=e=t.$handleEvent(e),t.scroll.apply(void 0,arguments)}}},[i("refresh",{attrs:{display:t.refreshing?"show":"hide"},on:{pullingdown:function(e){arguments[0]=e=t.$handleEvent(e),t.onpullingdown.apply(void 0,arguments)},refresh:function(e){arguments[0]=e=t.$handleEvent(e),t.onrefresh.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"refresh-info-txt"}),i("loading-indicator")],1),t._l(t.playerList,(function(e,n){return i("cell",{key:n,style:{height:t.screenHeight+"px"},attrs:{recycle:!1,"data-index":n}},[t.playerCur===n?i("v-uni-video",{ref:"myFollowVideo",refInFor:!0,staticStyle:{width:"750rpx"},style:{height:t.screenHeight+"px"},attrs:{id:"myFollowVideo","object-fit":e.width>=e.height?"contain":"fill",src:e.url,controls:!1,"enable-progress-gesture":!1,loop:!0,autoplay:!0,"show-loading":"true"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.playOrPause.apply(void 0,arguments)},play:function(e){arguments[0]=e=t.$handleEvent(e),t.onplay.apply(void 0,arguments)},error:function(e){arguments[0]=e=t.$handleEvent(e),t.onerror.apply(void 0,arguments)},timeupdate:function(e){arguments[0]=e=t.$handleEvent(e),t.timeupdate.apply(void 0,arguments)}}}):t._e(),e.play?t._e():i("v-uni-image",{staticStyle:{width:"750rpx",filter:"blur(10px)"},style:{height:t.screenHeight+"px"},attrs:{"lazy-load":!0,"fade-show":!1,src:e.cover,mode:e.width>=e.height?"aspectFit":"scaleToFill"}}),i("v-uni-view",{staticClass:"publish-info-box"},[i("v-uni-view",{},[i("v-uni-text",{staticClass:"publish-info-vloger-name"},[t._v("@"+t._s(e.vlogerName))]),i("v-uni-text",{staticClass:"publish-info-content"},[t._v(t._s(e.content))]),i("v-uni-view",{staticClass:"publish-info-music-box"},[i("v-uni-image",{staticClass:"icon-fire",attrs:{src:"/static/images/icon-fire.png"}}),i("v-uni-text",{staticClass:"muisc-words"},[t._v(t._s(e.vlogerName)+"的原声创作")])],1)],1),i("v-uni-view",{staticStyle:{"flex-direction":"row"}},[t.isIOS?t._e():i("v-uni-image",{staticClass:"play-cd",staticStyle:{width:"120rpx",height:"120rpx"},attrs:{src:"/static/images/icon-cd.png"}}),t.isIOS?i("v-uni-image",{staticClass:"play-cd",attrs:{src:"https://imooc-news.oss-cn-shanghai.aliyuncs.com/image/cd-play-4.gif?time="+t.times}}):t._e()],1)],1),i("v-uni-view",{staticClass:"operation-box"},[i("v-uni-view",{staticClass:"operation-face-box"},[i("v-uni-image",{staticClass:"user-face",attrs:{src:e.vlogerFace},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goUserInfoSeeSee(e.vlogerId)}}})],1),e.doIFollowVloger?t._e():i("v-uni-image",{staticClass:"follow-me",attrs:{src:"/static/images/icon-follow.png"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.followMe(e.vlogerId)}}}),i("v-uni-view",{staticClass:"like-box"},[e.doILikeThisVlog?t._e():i("v-uni-image",{staticClass:"icon",attrs:{src:"/static/images/icon-unlike.png"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.likeOrDislikeVlog(1)}}}),e.doILikeThisVlog?i("v-uni-image",{staticClass:"icon",attrs:{src:"/static/images/icon-like.png"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.likeOrDislikeVlog(0)}}}):t._e(),i("v-uni-text",{staticClass:"some-counts"},[t._v(t._s(e.likeCounts))])],1),i("v-uni-view",{staticClass:"comment-and-share-box"},[i("v-uni-image",{staticClass:"icon",attrs:{src:"/static/images/icon-comments.png"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.commentToggle.apply(void 0,arguments)}}}),i("v-uni-text",{staticClass:"some-counts"},[t._v(t._s(t.thisVlogTotalComentCounts))])],1),i("v-uni-view",{staticClass:"comment-and-share-box"},[i("v-uni-image",{staticClass:"icon",attrs:{src:"/static/images/icon-share.png"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.shareToggle.apply(void 0,arguments)}}}),i("v-uni-text",{staticClass:"some-counts"},[t._v("分享")])],1)],1)],1)}))],2),null!=t.thisVlog&&t.thisVlog!={}?i("v-uni-view",[i("uni-popup",{ref:"comment",attrs:{type:"comment"}},[i("uni-popup-comments",{attrs:{thisVlogerId:t.thisVlogerId,thisVlogId:t.thisVlogId}})],1),i("uni-popup",{ref:"share",attrs:{"background-color":"#fff",type:"share"}},[i("uni-popup-share",{attrs:{thisVlogerId:t.thisVlogerId,thisVlogId:t.thisVlogId,vlogUrl:t.thisVlog.url,isPrivate:t.thisVlog.isPrivate}})],1)],1):t._e()],1)},s=[]},"7acd":function(t,e,i){var n=i("c8fc");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("1e1c457f",n,!0,{sourceMap:!1,shadowMode:!1})},"7d7d":function(t,e,i){"use strict";i.r(e);var n=i("6a4a"),o=i("e5bf");for(var s in o)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(s);i("9dcf");var a=i("f0c5"),l=Object(a["a"])(o["default"],n["b"],n["c"],!1,null,"18d79177",null,!1,n["a"],void 0);e["default"]=l.exports},8275:function(t,e,i){"use strict";i.r(e);var n=i("41e7"),o=i.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=o.a},"8d0a":function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("a434"),i("99af");var n=getApp(),o={props:{screenHeight:{default:0},src:{default:!1},playFollowStatus:{default:!1},playStatus:{default:!1},videoList:{default:[]},refreshList:{default:[]},pagingList:{default:[]}},data:function(){return{thisVlog:{},thisVlogId:"",thisVlogerId:"",refreshing:!1,showRefreshLoading:"hide",playerCur:0,page:0,totalPage:0,playerList:this.videoList,thisVlogTotalComentCounts:0,videoContext:{},currentIndex:0,contentOffsetY:0,times:(new Date).getTime(),objectFit:"fill",isIOS:"ios"==uni.getSystemInfoSync().platform}},created:function(){this.isIOS||(this.objectFit="cover"),this.displayVideoPaging(this.page+1,!0);var t=uni.createVideoContext("myFollowVideo");this.videoContext=t},watch:{refreshList:function(t){var e=t;null!=e&&void 0!=e&&e.length>0&&(this.playerList=e),this.playerCur=0,this.currentIndex=0,this.contentOffsetY=0},playFollowStatus:function(t){t?this.videoContext.play():this.videoContext.pause()}},methods:{freshCommentCounts:function(){var t=this,e=(getApp().getUserInfoSession().id,n.globalData.serverUrl);if(null!=t.playerList&&void 0!=t.playerList&&0!=t.playerList.length){var i=t.playerCur,o=t.playerList[i],s=o.vlogId;e=n.globalData.serverUrl;uni.request({method:"GET",url:e+"/comment/counts?vlogId="+s,success:function(e){200==e.data.status?t.thisVlogTotalComentCounts=e.data.data:t.thisVlogTotalComentCounts=0}})}},likeOrDislikeVlog:function(t){var e=this;if(1==t){var i=getApp().getUserInfoSession();if(null==i)return uni.showToast({duration:3e3,title:"请登录~",icon:"none"}),void uni.navigateTo({url:"../loginRegist/loginRegist",animationType:"slide-in-bottom",success:function(){e.loginWords="请登录"}});var o=getApp().getUserInfoSession().id,s=n.globalData.serverUrl,a=e.playerCur,l=e.playerList[a];uni.request({method:"POST",header:{headerUserId:o,headerUserToken:n.getUserSessionToken()},url:s+"/vlog/like?userId="+o+"&vlogerId="+l.vlogerId+"&vlogId="+l.vlogId,success:function(t){200==t.data.status?(e.reLikePlayList(l.vlogId),e.refreshVlogCounts()):uni.showToast({title:t.data.msg,icon:"none",duration:3e3})}})}else if(0==t){i=getApp().getUserInfoSession();if(null==i)return uni.showToast({duration:3e3,title:"请登录~",icon:"none"}),void uni.navigateTo({url:"../loginRegist/loginRegist",animationType:"slide-in-bottom",success:function(){e.loginWords="请登录"}});o=getApp().getUserInfoSession().id,s=n.globalData.serverUrl,a=e.playerCur,l=e.playerList[a];uni.request({method:"POST",header:{headerUserId:o,headerUserToken:n.getUserSessionToken()},url:s+"/vlog/unlike?userId="+o+"&vlogerId="+l.vlogerId+"&vlogId="+l.vlogId,success:function(t){200==t.data.status?(e.reDislikePlayList(l.vlogId),e.refreshVlogCounts()):uni.showToast({title:t.data.msg,icon:"none",duration:3e3})}})}},reLikePlayList:function(t){for(var e=this.playerList,i=0;i<e.length;i++){var n=e[i];n.vlogId==t&&(n.doILikeThisVlog=!0,e.splice(i,1,n))}this.playerList=e},reDislikePlayList:function(t){for(var e=this.playerList,i=0;i<e.length;i++){var n=e[i];n.vlogId==t&&(n.doILikeThisVlog=!1,e.splice(i,1,n))}this.playerList=e},reFollowPlayList:function(t){for(var e=this.playerList,i=0;i<e.length;i++){var n=e[i];n.vlogerId==t&&(n.doIFollowVloger=!0,e.splice(i,1,n))}this.playerList=e},reCancelPlayList:function(t){for(var e=this.playerList,i=0;i<e.length;i++){var n=e[i];n.vlogerId==t&&(n.doIFollowVloger=!1,e.splice(i,1,n))}this.playerList=e},followMe:function(t){var e=this,i=getApp().getUserInfoSession();if(null==i)return uni.showToast({duration:3e3,title:"请登录~",icon:"none"}),void uni.navigateTo({url:"../loginRegist/loginRegist",animationType:"slide-in-bottom",success:function(){e.loginWords="请登录"}});var o=getApp().getUserInfoSession().id,s=n.globalData.serverUrl;uni.request({method:"POST",header:{headerUserId:o,headerUserToken:n.getUserSessionToken()},url:s+"/fans/follow?myId="+o+"&vlogerId="+t,success:function(i){200==i.data.status?e.reFollowPlayList(t):uni.showToast({title:i.data.msg,icon:"none",duration:3e3})}})},goUserInfoSeeSee:function(t){uni.setStorageSync("userPageId",t),uni.navigateTo({url:"/pages/me/vlogerInfo?userPageId="+t})},listScroll:function(t){t.contentOffset.y>0&&this.$emit("showLoading")},downloadVlog:function(){n.globalData.serverUrl;var t=this.playerCur,e=this.playerList[t];e.url},copyLink:function(){},showQRCode:function(){},changeVlogToPrivate:function(){},onrefresh:function(t){var e=this;this.refreshing=!0,setTimeout((function(){e.refreshing=!1,e.$emit("hideLoading"),e.refreshText="↓ Pull To Refresh"}),300),uni.startPullDownRefresh()},onplay:function(t){"ios"==uni.getSystemInfoSync().platform&&this.doplay(.1)},onerror:function(t){},timeupdate:function(t){t.detail.currentTime>.2&&this.doplay(t.detail.currentTime)},playOrPause:function(){var t=this.playFollowStatus;t?this.videoContext.play():this.videoContext.pause(),this.playFollowStatus=!t},scroll:function(t){this.currentIndex;t.contentOffset.y,this.contentOffsetY,this.contentOffsetY=t.contentOffset.y;var e=this.playerList.length;if(this.currentIndex=Math.round(Math.abs(this.contentOffsetY)/(t.contentSize.height/e)),this.onchange(this.currentIndex),this.times=(new Date).getTime(),this.playerList.length-this.currentIndex<3){if(this.page==this.totalPage)return;this.displayVideoPaging(this.page+1,!1)}},displayVideoPaging:function(t,e){var i=this,o=getApp().getUserInfoSession(),s="";if(null!=o){s=o.id;var a=n.globalData.serverUrl;uni.request({method:"GET",header:{headerUserId:s,headerUserToken:n.getUserSessionToken()},url:a+"/vlog/followList?myId="+s+"&page="+t+"&pageSize=10",success:function(n){if(200==n.data.status){var o=n.data.data.rows,s=n.data.data.total;e&&(i.playerList=[]),i.playerList=i.playerList.concat(o),i.page=t,i.totalPage=s,e&&(i.setThisVlogInfo(),i.freshCommentCounts()),i.doTimer()}else uni.showToast({title:n.data.msg,icon:"none",duration:3e3})},complete:function(){}})}},doTimer:function(){var t=this;setTimeout((function(){null!=t.playerList&&void 0!=t.playerList&&t.playerList.length>0&&(t.videoContext.pause(),t.playFollowStatus=!1)}),3e3)},doplay:function(t){t>0&&(this.playerList[this.playerCur].play=!0)},onchange:function(t){t!=this.playerCur&&(this.playerList[this.playerCur].play=!1,this.playerCur=t),this.refreshVlogCounts(),this.setThisVlogInfo(),this.freshCommentCounts()},setThisVlogInfo:function(){var t=this;n.globalData.serverUrl;if(null!=t.playerList&&void 0!=t.playerList&&t.playerList.length>0){var e=t.playerCur,i=t.playerList[e];this.thisVlog=i,this.thisVlogId=i.vlogId,this.thisVlogerId=i.vlogerId}},refreshVlogCounts:function(){var t=this,e=n.globalData.serverUrl,i=t.playerCur,o=t.playerList[i];uni.request({method:"POST",url:e+"/vlog/totalLikedCounts?vlogId="+o.vlogId,success:function(e){if(200==e.data.status){var i=e.data.data;t.reChangeVlogLikedCountsInPlayList(o.vlogId,i)}}})},reChangeVlogLikedCountsInPlayList:function(t,e){for(var i=this.playerList,n=0;n<i.length;n++){var o=i[n];o.vlogId==t&&(o.likeCounts=e,i.splice(n,1,o))}this.playerList=i},commentToggle:function(){this.$refs.comment.open(),uni.hideTabBar({animation:!0})},shareToggle:function(){this.$refs.share.open(),uni.hideTabBar({animation:!0})}}};e.default=o},"9dcf":function(t,e,i){"use strict";var n=i("f893"),o=i.n(n);o.a},b576:function(t,e,i){"use strict";var n=i("7acd"),o=i.n(n);o.a},c8fc:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,".icon[data-v-e055222c]{width:%?80?%;height:%?80?%;opacity:.9}.user-face[data-v-e055222c]{width:%?100?%;height:%?100?%;border-radius:%?100?%}.play-cd[data-v-e055222c]{width:%?150?%;height:%?150?%;opacity:.8}.refresh-info-txt[data-v-e055222c]{color:#f1f1f1;text-align:center;font-size:12px}.publish-info-box[data-v-e055222c]{position:absolute;bottom:%?200?%;left:0;right:0;padding-left:%?20?%;padding-right:%?20?%;flex-direction:row;justify-content:space-between;align-items:center}.publish-info-vloger-name[data-v-e055222c]{color:#fff;font-size:%?40?%;font-weight:600;padding:%?10?%}.publish-info-music-box[data-v-e055222c]{flex-direction:row;align-items:center}.publish-info-content[data-v-e055222c]{color:#fff;font-size:%?28?%;font-weight:400;padding:%?10?%;lines:5;width:%?520?%;text-overflow:ellipsis}.icon-fire[data-v-e055222c]{width:%?36?%;height:%?36?%}.muisc-words[data-v-e055222c]{color:#fff;font-size:%?28?%;padding:%?10?%;width:%?400?%}.some-counts[data-v-e055222c]{font-size:%?24?%;font-weight:500;text-align:center;color:#fff;margin-top:%?2?%}.operation-box[data-v-e055222c]{position:absolute;top:0;bottom:0;right:0;align-items:center;justify-content:center;padding-right:%?20?%}.operation-face-box[data-v-e055222c]{border-radius:%?100?%;border-color:#fff;border-width:%?3?%}.follow-me[data-v-e055222c]{width:%?40?%;height:%?40?%;border-radius:10px;position:relative;top:%?-20?%}.like-box[data-v-e055222c]{flex-direction:column;align-items:center;margin-top:%?30?%}.comment-and-share-box[data-v-e055222c]{flex-direction:column;align-items:center;margin-top:%?45?%}",""]),t.exports=e},d0ce:function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("a434"),i("99af");var n=getApp(),o={props:{screenHeight:{default:0},src:{default:!1},playStatus:{default:!1},videoList:{default:[]},refreshList:{default:[]},pagingList:{default:[]}},data:function(){return{thisVlog:{},thisVlogId:"",thisVlogerId:"",userId:"",refreshing:!1,showRefreshLoading:"hide",playerCur:0,page:0,totalPage:0,playerList:this.videoList,thisVlogTotalComentCounts:0,videoContext:{},currentIndex:0,contentOffsetY:0,times:(new Date).getTime(),objectFit:"fill",isIOS:"ios"==uni.getSystemInfoSync().platform}},created:function(){this.isIOS||(this.objectFit="cover");var t=getApp().getUserInfoSession();null!=t&&(this.userId=getApp().getUserInfoSession().id),this.displayVideoPaging(this.page+1,!0);var e=uni.createVideoContext("myVideo");this.videoContext=e},watch:{refreshList:function(t){var e=t;null!=e&&void 0!=e&&e.length>0&&(this.playerList=e),this.playerCur=0,this.currentIndex=0,this.contentOffsetY=0},playStatus:function(t){t?this.videoContext.play():this.videoContext.pause()}},methods:{getGraceNumber:function(t){return getApp().graceNumber(t)},freshCommentCounts:function(){var t=this,e=n.globalData.serverUrl,i=t.playerCur,o=t.playerList[i],s=o.vlogId;e=n.globalData.serverUrl;uni.request({method:"GET",url:e+"/comment/counts?vlogId="+s,success:function(e){200==e.data.status?t.thisVlogTotalComentCounts=e.data.data:t.thisVlogTotalComentCounts=0}})},likeOrDislikeVlog:function(t){var e=this;if(1==t){var i=getApp().getUserInfoSession();if(null==i)return uni.showToast({duration:3e3,title:"请登录~",icon:"none"}),void uni.navigateTo({url:"../loginRegist/loginRegist",animationType:"slide-in-bottom",success:function(){e.loginWords="请登录"}});var o=getApp().getUserInfoSession().id,s=n.globalData.serverUrl,a=e.playerCur,l=e.playerList[a];uni.request({method:"POST",header:{headerUserId:o,headerUserToken:n.getUserSessionToken()},url:s+"/vlog/like?userId="+o+"&vlogerId="+l.vlogerId+"&vlogId="+l.vlogId,success:function(t){200==t.data.status?(e.reLikePlayList(l.vlogId),e.refreshVlogCounts()):uni.showToast({title:t.data.msg,icon:"none",duration:3e3})}})}else if(0==t){i=getApp().getUserInfoSession();if(null==i)return uni.showToast({duration:3e3,title:"请登录~",icon:"none"}),void uni.navigateTo({url:"../loginRegist/loginRegist",animationType:"slide-in-bottom",success:function(){e.loginWords="请登录"}});o=getApp().getUserInfoSession().id,s=n.globalData.serverUrl,a=e.playerCur,l=e.playerList[a];uni.request({method:"POST",header:{headerUserId:o,headerUserToken:n.getUserSessionToken()},url:s+"/vlog/unlike?userId="+o+"&vlogerId="+l.vlogerId+"&vlogId="+l.vlogId,success:function(t){200==t.data.status?(e.reDislikePlayList(l.vlogId),e.refreshVlogCounts()):uni.showToast({title:t.data.msg,icon:"none",duration:3e3})}})}},reLikePlayList:function(t){for(var e=this.playerList,i=0;i<e.length;i++){var n=e[i];n.vlogId==t&&(n.doILikeThisVlog=!0,e.splice(i,1,n))}this.playerList=e},reDislikePlayList:function(t){for(var e=this.playerList,i=0;i<e.length;i++){var n=e[i];n.vlogId==t&&(n.doILikeThisVlog=!1,e.splice(i,1,n))}this.playerList=e},reFollowPlayList:function(t){for(var e=this.playerList,i=0;i<e.length;i++){var n=e[i];n.vlogerId==t&&(n.doIFollowVloger=!0,e.splice(i,1,n))}this.playerList=e},reCancelPlayList:function(t){for(var e=this.playerList,i=0;i<e.length;i++){var n=e[i];n.vlogerId==t&&(n.doIFollowVloger=!1,e.splice(i,1,n))}this.playerList=e},followMe:function(t){var e=this,i=getApp().getUserInfoSession();if(null==i)return uni.showToast({duration:3e3,title:"请登录~",icon:"none"}),void uni.navigateTo({url:"../loginRegist/loginRegist",animationType:"slide-in-bottom",success:function(){e.loginWords="请登录"}});var o=getApp().getUserInfoSession().id,s=n.globalData.serverUrl;uni.request({method:"POST",header:{headerUserId:o,headerUserToken:n.getUserSessionToken()},url:s+"/fans/follow?myId="+o+"&vlogerId="+t,success:function(i){200==i.data.status?e.reFollowPlayList(t):uni.showToast({title:i.data.msg,icon:"none",duration:3e3})}})},goUserInfoSeeSee:function(t){uni.setStorageSync("userPageId",t),uni.navigateTo({url:"/pages/me/vlogerInfo?userPageId="+t})},listScroll:function(t){t.contentOffset.y>0&&this.$emit("showLoading")},downloadVlog:function(){n.globalData.serverUrl;var t=this.playerCur,e=this.playerList[t];e.url},copyLink:function(){},showQRCode:function(){},changeVlogToPrivate:function(){},onpullingdown:function(t){},onrefresh:function(t){var e=this;this.refreshing=!0,setTimeout((function(){e.refreshing=!1,e.$emit("hideLoading"),e.refreshText="↓ Pull To Refresh"}),300),uni.startPullDownRefresh()},onplay:function(t){"ios"==uni.getSystemInfoSync().platform&&this.doplay(.1)},onerror:function(t){},timeupdate:function(t){t.detail.currentTime>.2&&this.doplay(t.detail.currentTime)},playOrPause:function(){var t=this.playStatus;t?this.videoContext.play():this.videoContext.pause(),this.playStatus=!t},scroll:function(t){this.currentIndex;t.contentOffset.y,this.contentOffsetY,this.contentOffsetY=t.contentOffset.y;var e=this.playerList.length;if(this.currentIndex=Math.round(Math.abs(this.contentOffsetY)/(t.contentSize.height/e)),this.onchange(this.currentIndex),this.times=(new Date).getTime(),this.playerList.length-this.currentIndex<3){if(this.page==this.totalPage)return;this.displayVideoPaging(this.page+1,!1)}},displayVideoPaging:function(t,e){var i=this,o=getApp().getUserInfoSession(),s="";null!=o&&(s=o.id);var a=n.globalData.serverUrl;uni.request({method:"GET",url:a+"/vlog/indexList?userId="+s+"&page="+t+"&pageSize=10",success:function(n){if(200==n.data.status){var o=n.data.data.rows,s=n.data.data.total;e&&(i.playerList=[]),i.playerList=i.playerList.concat(o),i.page=t,i.totalPage=s,e&&(i.setThisVlogInfo(),i.freshCommentCounts())}else uni.showToast({title:n.data.msg,icon:"none",duration:3e3})},complete:function(){uni.stopPullDownRefresh()}})},doplay:function(t){t>0&&(this.playerList[this.playerCur].play=!0)},onchange:function(t){t!=this.playerCur&&(this.playerList[this.playerCur].play=!1,this.playerCur=t),this.refreshVlogCounts(),this.setThisVlogInfo(),this.freshCommentCounts()},setThisVlogInfo:function(){n.globalData.serverUrl;var t=this.playerCur,e=this.playerList[t];this.thisVlog=e,this.thisVlogId=e.vlogId,this.thisVlogerId=e.vlogerId},refreshVlogCounts:function(){var t=this,e=n.globalData.serverUrl,i=t.playerCur,o=t.playerList[i];uni.request({method:"POST",url:e+"/vlog/totalLikedCounts?vlogId="+o.vlogId,success:function(e){if(200==e.data.status){var i=e.data.data;t.reChangeVlogLikedCountsInPlayList(o.vlogId,i)}}})},reChangeVlogLikedCountsInPlayList:function(t,e){for(var i=this.playerList,n=0;n<i.length;n++){var o=i[n];o.vlogId==t&&(o.likeCounts=e,i.splice(n,1,o))}this.playerList=i},commentToggle:function(){this.$refs.comment.open(),uni.hideTabBar({animation:!0})},shareToggle:function(){this.$refs.share.open(),uni.hideTabBar({animation:!0})}}};e.default=o},d1c1:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,"\n/* index start */.page[data-v-d919a642]{position:absolute;left:0;right:0;top:0;bottom:0;background-color:#000}\n/* index end */\n/* 顶部选项卡 start */.header[data-v-d919a642]{position:absolute;left:0;right:0;flex-direction:row;height:%?100?%;line-height:%?100?%;align-items:center;padding-left:%?40?%;padding-right:%?40?%}.header-center[data-v-d919a642]{flex:1;flex-direction:row;align-items:center;justify-content:center}.header-left[data-v-d919a642],\n.header-right[data-v-d919a642]{color:#999;height:%?100?%;line-height:%?100?%;align-items:flex-start;justify-content:flex-end;font-family:iconfont}.header-right-search[data-v-d919a642]{height:%?100?%\n\t/* align-items: flex-start;\n\tjustify-content: flex-end; */}.header-item[data-v-d919a642]{align-items:center;margin-left:%?6?%;margin-right:%?6?%}.header-item-title[data-v-d919a642]{width:%?120?%;text-align:center;height:%?60?%;line-height:%?60?%;color:#fff;font-size:16px;font-weight:600}.header-refresh-title[data-v-d919a642]{width:%?300?%;text-align:center;height:%?60?%;line-height:%?60?%;color:#fff;font-size:16px;font-weight:600}.header-item-line[data-v-d919a642]{height:%?5?%;line-height:%?8?%;width:%?60?%;border-radius:%?8?%}\n/* 顶部选项卡 end */\n/* 选项卡轮播组件 start */.my-swiper[data-v-d919a642]{position:absolute;left:0;right:0;top:0;bottom:0}.near-by[data-v-d919a642]{background-color:#000;align-items:center;justify-content:center}.my-follow[data-v-d919a642]{background-color:#000;align-items:center;justify-content:center}\n/* 选项卡轮播组件 end */.warn-info[data-v-d919a642]{color:#fff;font-size:%?36?%;font-weight:600}.normal-img[data-v-d919a642]{width:%?50?%;height:%?50?%;opacity:.8}",""]),t.exports=e},dc37:function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return n}));var n={uniPopup:i("3bed").default,uniPopupComments:i("773a").default,uniPopupShare:i("8973").default},o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticStyle:{flex:"1"}},[i("list",{attrs:{pagingEnabled:!0,"show-scrollbar":!1,scrollable:!0},on:{scroll:function(e){arguments[0]=e=t.$handleEvent(e),t.listScroll.apply(void 0,arguments)},scrollend:function(e){arguments[0]=e=t.$handleEvent(e),t.scroll.apply(void 0,arguments)}}},[i("refresh",{attrs:{display:t.refreshing?"show":"hide"},on:{pullingdown:function(e){arguments[0]=e=t.$handleEvent(e),t.onpullingdown.apply(void 0,arguments)},refresh:function(e){arguments[0]=e=t.$handleEvent(e),t.onrefresh.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"refresh-info-txt"}),i("loading-indicator")],1),t._l(t.playerList,(function(e,n){return i("cell",{key:n,style:{height:t.screenHeight+"px"},attrs:{recycle:!1,"data-index":n}},[t.playerCur===n?i("v-uni-video",{ref:"myVideo",refInFor:!0,staticStyle:{width:"750rpx"},style:{height:t.screenHeight+"px"},attrs:{id:"myVideo","object-fit":e.width>=e.height?"contain":"fill",src:e.url,controls:!1,"enable-progress-gesture":!1,loop:!0,autoplay:!0,"show-loading":"true"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.playOrPause.apply(void 0,arguments)},play:function(e){arguments[0]=e=t.$handleEvent(e),t.onplay.apply(void 0,arguments)},error:function(e){arguments[0]=e=t.$handleEvent(e),t.onerror.apply(void 0,arguments)},timeupdate:function(e){arguments[0]=e=t.$handleEvent(e),t.timeupdate.apply(void 0,arguments)}}}):t._e(),e.play?t._e():i("v-uni-image",{staticStyle:{width:"750rpx",filter:"blur(10px)"},style:{height:t.screenHeight+"px"},attrs:{"lazy-load":!0,"fade-show":!1,src:e.cover,mode:e.width>=e.height?"aspectFit":"scaleToFill"}}),i("v-uni-view",{staticClass:"publish-info-box"},[i("v-uni-view",{},[i("v-uni-text",{staticClass:"publish-info-vloger-name"},[t._v("@"+t._s(e.vlogerName))]),i("v-uni-text",{staticClass:"publish-info-content"},[t._v(t._s(e.content))]),i("v-uni-view",{staticClass:"publish-info-music-box"},[i("v-uni-image",{staticClass:"icon-fire",attrs:{src:"/static/images/icon-fire.png"}}),i("v-uni-text",{staticClass:"muisc-words"},[t._v(t._s(e.vlogerName)+"的原声创作")])],1)],1),i("v-uni-view",{staticStyle:{"flex-direction":"row"}},[t.isIOS?t._e():i("v-uni-image",{staticClass:"play-cd",staticStyle:{width:"120rpx",height:"120rpx"},attrs:{src:"/static/images/icon-cd.png"}}),t.isIOS?i("v-uni-image",{staticClass:"play-cd",attrs:{src:"https://imooc-news.oss-cn-shanghai.aliyuncs.com/image/cd-play-4.gif?time="+t.times}}):t._e()],1)],1),i("v-uni-view",{staticClass:"operation-box"},[i("v-uni-view",{staticClass:"operation-face-box"},[i("v-uni-image",{staticClass:"user-face",attrs:{src:e.vlogerFace},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goUserInfoSeeSee(e.vlogerId)}}})],1),e.doIFollowVloger||t.userId==t.thisVlogerId?t._e():i("v-uni-image",{staticClass:"follow-me",attrs:{src:"/static/images/icon-follow.png"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.followMe(e.vlogerId)}}}),i("v-uni-view",{staticClass:"like-box"},[e.doILikeThisVlog?t._e():i("v-uni-image",{staticClass:"icon",attrs:{src:"/static/images/icon-unlike.png"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.likeOrDislikeVlog(1)}}}),e.doILikeThisVlog?i("v-uni-image",{staticClass:"icon",attrs:{src:"/static/images/icon-like.png"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.likeOrDislikeVlog(0)}}}):t._e(),i("v-uni-text",{staticClass:"some-counts"},[t._v(t._s(t.getGraceNumber(e.likeCounts)))])],1),i("v-uni-view",{staticClass:"comment-and-share-box"},[i("v-uni-image",{staticClass:"icon",attrs:{src:"/static/images/icon-comments.png"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.commentToggle.apply(void 0,arguments)}}}),i("v-uni-text",{staticClass:"some-counts"},[t._v(t._s(t.getGraceNumber(t.thisVlogTotalComentCounts)))])],1),i("v-uni-view",{staticClass:"comment-and-share-box"},[i("v-uni-image",{staticClass:"icon",attrs:{src:"/static/images/icon-share.png"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.shareToggle.apply(void 0,arguments)}}}),i("v-uni-text",{staticClass:"some-counts"},[t._v("分享")])],1)],1)],1)}))],2),i("v-uni-view",[i("uni-popup",{ref:"comment",attrs:{type:"comment"}},[i("uni-popup-comments",{attrs:{thisVlogerId:t.thisVlogerId,thisVlogId:t.thisVlogId}})],1),i("uni-popup",{ref:"share",attrs:{"background-color":"#fff",type:"share"}},[i("uni-popup-share",{attrs:{thisVlogerId:t.thisVlogerId,thisVlogId:t.thisVlogId,vlogUrl:t.thisVlog.url,isPrivate:t.thisVlog.isPrivate}})],1)],1)],1)},s=[]},e5bf:function(t,e,i){"use strict";i.r(e);var n=i("8d0a"),o=i.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=o.a},f24c:function(t,e,i){"use strict";i.r(e);var n=i("d0ce"),o=i.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=o.a},f893:function(t,e,i){var n=i("10d9");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=i("4f06").default;o("9b8a3eaa",n,!0,{sourceMap:!1,shadowMode:!1})},ff41:function(t,e,i){t.exports=i.p+"static/img/loading.22fcf3ba.gif"}}]);